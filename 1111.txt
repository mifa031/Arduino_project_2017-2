/* arduino web client - GET request for index.html or index.php */

#include <SPI.h>
#include <Phpoc.h>
#include <TimeLib.h>
#include <TM1637.h>

//char server_name[] = "www.google.com";
//char server_name[] = "216.58.221.36";
//char server_name[] = "www.arduino.cc";
char server_name[] = "121.128.151.144";
PhpocClient client;

void setup() {
  Serial.begin(9600);
  while(!Serial)
    ;

  Serial.println("Sending GET request to web server");
    
  Phpoc.begin(PF_LOG_SPI | PF_LOG_NET);
  //Phpoc.begin();

  if(client.connect(server_name, 80))
  {
    Serial.println("Connected to server");
    //client.println("GET / HTTP/1.0");
    client.println("GET /status.php?room_num=3 HTTP/1.0");
    client.println();
  }
  else
    Serial.println("connection failed");
}
int mode0 = 1;
String s = "";
void loop() {
  //Serial.println(client.available());
  while(client.available())
  {
    char c = client.read();
   // Serial.print(c);
    s.concat(c);
    if(c == '\r' || c== '\n')
         s = "";
  }
    Serial.println(s);
    Serial.println(s);
  

  if(!client.connected())
  {
    Serial.println("disconnected");
    //client.stop();
    while(1)
      ;
  }
}